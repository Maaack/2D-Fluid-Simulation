[gd_resource type="Shader" format=2]

[resource]
code = "/* 
This shader is under MIT license.
*/

shader_type canvas_item;

uniform float scale;

void fragment () {

	float UVx = UV.x;
	float UVy = UV.y;
	if (UVx < TEXTURE_PIXEL_SIZE.x || UVx > 1.0 - TEXTURE_PIXEL_SIZE.x ||
	    UVy < TEXTURE_PIXEL_SIZE.y || UVy > 1.0 - TEXTURE_PIXEL_SIZE.y) {
		UVx = UVx < TEXTURE_PIXEL_SIZE.x ? UVx + TEXTURE_PIXEL_SIZE.x : UVx;
		UVx = UVx > 1.0 - TEXTURE_PIXEL_SIZE.x ? UVx - TEXTURE_PIXEL_SIZE.x : UVx;
		UVy = UVy < TEXTURE_PIXEL_SIZE.y ? UVy + TEXTURE_PIXEL_SIZE.y : UVy;
		UVy = UVy > 1.0 - TEXTURE_PIXEL_SIZE.y ? UVy - TEXTURE_PIXEL_SIZE.y : UVy;
		vec4 col = texture(TEXTURE, vec2(UVx, UVy));
		COLOR = vec4(col.rgb * scale, 1.0);
	} else {
		COLOR = texture(TEXTURE, UV)
	}
}
"
